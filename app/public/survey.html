<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey Page</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <style>
        body {
            background-color: papayawhip;
        }

        .drop_menu {
            height: 35px;
            border-radius: 5px;
            background-color: rgb(113, 104, 230);
            color: white;
        }
        img {
            border-radius: 12px;
        }
    </style>
</head>

<body>
    <div class="container"><br><br>
        <h1>Survey Questions</h1>
        <hr>
        <h2>About You</h2>
        <hr>
        <form id="myForm">
            <div class="form-group">
                <label for="name">Name (Required)</label>
                <input type="text" class="form-control" id="name">
            </div>
            <div class="form-group">
                <label for="photo">Link to Photo Image (Required)</label>
                <input type="link" class="form-control" id="photo">
            </div>
            <hr>
            <h3>
                <strong>Question 1</strong>
            </h3>
            <h4>Have you ever pondered the airspeed velocity of a unladen swallow?</h4>
            <label for="q1">Choose an Option</label><br>
            <select id="q1" class="drop_menu">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <hr>
            <h3>
                <strong>Question 2</strong>
            </h3>
            <h4>"Curse your sudden but inevitable betrayal!"</h4>
            <label for="q2">Choose an Option</label><br>
            <select id="q2" class="drop_menu">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <hr>
            <h3>
                <strong>Question 3</strong>
            </h3>
            <h4>"Man walks down the street in a hat like that, you know he's not afraid of anything"</h4>
            <label for="q3">Choose an Option</label><br>
            <select id="q3" class="drop_menu">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <hr>
            <h3>
                <strong>Question 4</strong>
            </h3>
            <h4>"Oh! Now we see the violence inherent in the system! Help!, Help!, I'm being repressed!"</h4>
            <label for="q4">Choose an Option</label><br>
            <select id="q4" class="drop_menu">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <hr>
            <h3>
                <strong>Question 5</strong>
            </h3>
            <h4>Iphone is best phone</h4>
            <label for="q5">Choose an Option</label><br>
            <select id="q5" class="drop_menu">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <hr>
            <h3>
                <strong>Question 6</strong>
            </h3>
            <h4>"Its just a flesh wound"</h4>
            <label for="q6">Choose an Option</label><br>
            <select id="q6" class="drop_menu">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <hr>
            <h3>
                <strong>Question 7</strong>
            </h3>
            <h4>"Ten percent of nothin' is... let me do the math here... nothin' into nothin'... carry the nothin'..."
            </h4>
            <label for="q7">Choose an Option</label><br>
            <select id="q7" class="drop_menu">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <hr>
            <h3>
                <strong>Question 8</strong>
            </h3>
            <h4>Android is best phone</h4>
            <label for="q8">Choose an Option</label><br>
            <select id="q8" class="drop_menu">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <hr>
            <h3>
                <strong>Question 9</strong>
            </h3>
            <h4>"Well, my time of not taking you seriously is coming to a middle"</h4>
            <label for="q9">Choose an Option</label><br>
            <select id="q9" class="drop_menu">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <hr>
            <h3>
                <strong>Question 10</strong>
            </h3>
            <h4>"Strange women lying in ponds, distributing swords, is no basis for a system of goverment."</h4>
            <label for="q10">Choose an Option</label><br>
            <select id="q10" class="drop_menu">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <hr>

            <button type="submit" class="btn btn-primary" id="survey-btn">Submit</button>
        </form><br>

        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/zuk881/FriendFinder"
                target="_blank">GitHub
                Repo</a></p>

        <!-- Modal -->
        <div id="friendModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"></button>
                        <h3 class="modal-title">Best Friend Match</h1>
                    </div>
                    <div class="modal-body">
                        <h2 id="matchFriend"></h2>
                        <img id="matchPhoto" src="#">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

    </div><br>

    <script type="text/javascript">

        // on click function for form submission and post
        $("#survey-btn").on("click", function (event) {
            event.preventDefault();

            // grab info from survey and trim white space
            var newSurvey = {
                name: $("#name").val().trim(),
                photo: $("#photo").val().trim(),

                // push scores from survey into an array
                scores: [$("#q1").val().trim(),
                $("#q2").val().trim(),
                $("#q3").val().trim(),
                $("#q4").val().trim(),
                $("#q5").val().trim(),
                $("#q6").val().trim(),
                $("#q7").val().trim(),
                $("#q8").val().trim(),
                $("#q9").val().trim(),
                $("#q10").val().trim()]
            }
           
            // testing and debugging
            console.log(newSurvey)

            // falsy check if user fails to fill out form, alert if incomplete
            if (!newSurvey.name || !newSurvey.photo) {
                alert("Please fill out empty forms")
            } else {
                $.post("/api/friends", newSurvey, function (data) {

                    // testing and debugging
                    console.log("Best match name is: " + data.name);
                    console.log("best match photo is: " + data.photo);

                    // pass data from post response to modal
                    $("#matchFriend").text(data.name);
                    $("#matchPhoto").attr("src", data.photo);

                    // toggle modal to open
                    $("#friendModal").modal("toggle");

                });
            };

            // reset form after submission
            document.getElementById("myForm").reset();

        });



    </script>

</body>

</html>